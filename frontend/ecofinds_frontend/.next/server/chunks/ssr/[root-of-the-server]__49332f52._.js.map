{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///E:/ODOO/hackathon_2.0/frontend/ecofinds_frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  redirectTo?: string;\r\n  requireAuth?: boolean;\r\n}\r\n\r\nexport default function ProtectedRoute({ \r\n  children, \r\n  redirectTo = '/login',\r\n  requireAuth = true \r\n}: ProtectedRouteProps) {\r\n  const { isAuthenticated, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      if (requireAuth && !isAuthenticated) {\r\n        router.push(redirectTo);\r\n      } else if (!requireAuth && isAuthenticated) {\r\n        router.push('/landing');\r\n      }\r\n    }\r\n  }, [isAuthenticated, loading, requireAuth, redirectTo, router]);\r\n\r\n  // Show loading spinner while checking authentication\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n  if (requireAuth && !isAuthenticated) {\r\n    return null; // Will redirect\r\n  }\r\n\r\n  if (!requireAuth && isAuthenticated) {\r\n    return null; // Will redirect\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAYe,SAAS,eAAe,EACrC,QAAQ,EACR,aAAa,QAAQ,EACrB,cAAc,IAAI,EACE;IACpB,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,IAAA,+JAAO;IAC5C,MAAM,SAAS,IAAA,oKAAS;IAExB,IAAA,uOAAS,EAAC;QACR,IAAI,CAAC,SAAS;YACZ,IAAI,eAAe,CAAC,iBAAiB;gBACnC,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,CAAC,eAAe,iBAAiB;gBAC1C,OAAO,IAAI,CAAC;YACd;QACF;IACF,GAAG;QAAC;QAAiB;QAAS;QAAa;QAAY;KAAO;IAE9D,qDAAqD;IACrD,IAAI,SAAS;QACX,qBACE,mQAAC;YAAI,WAAU;sBACb,cAAA,mQAAC;gBAAI,WAAU;;kCACb,mQAAC;wBAAI,WAAU;;;;;;kCACf,mQAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAIrC;IAGA,IAAI,eAAe,CAAC,iBAAiB;QACnC,OAAO,MAAM,gBAAgB;IAC/B;IAEA,IAAI,CAAC,eAAe,iBAAiB;QACnC,OAAO,MAAM,gBAAgB;IAC/B;IAEA,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///E:/ODOO/hackathon_2.0/frontend/ecofinds_frontend/src/lib/products.ts"],"sourcesContent":["import api from './api';\r\n\r\nexport interface Product {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  price: string;\r\n  image?: string;\r\n  owner: number;\r\n  owner_username: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  is_available: boolean;\r\n}\r\n\r\nexport interface CreateProductData {\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  price: number;\r\n  image?: File;\r\n  is_available?: boolean;\r\n}\r\n\r\nexport interface UpdateProductData {\r\n  title?: string;\r\n  description?: string;\r\n  category?: string;\r\n  price?: number;\r\n  image?: File;\r\n  is_available?: boolean;\r\n}\r\n\r\nexport interface Category {\r\n  value: string;\r\n  label: string;\r\n}\r\n\r\nexport interface SearchFilters {\r\n  search?: string;\r\n  category?: string;\r\n  min_price?: number;\r\n  max_price?: number;\r\n  sort_by?: string;\r\n  page?: number;\r\n  page_size?: number;\r\n}\r\n\r\nexport interface SearchResponse {\r\n  results: Product[];\r\n  count: number;\r\n  page: number;\r\n  page_size: number;\r\n  total_pages: number;\r\n}\r\n\r\n// Helper function to get full image URL\r\nexport const getImageUrl = (imagePath?: string): string => {\r\n  if (!imagePath) return '';\r\n  if (imagePath.startsWith('http')) return imagePath;\r\n  return `http://localhost:8000${imagePath}`;\r\n};\r\n\r\nexport const productsService = {\r\n  async getProducts(filters?: SearchFilters): Promise<Product[]> {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (filters) {\r\n        Object.entries(filters).forEach(([key, value]) => {\r\n          if (value !== undefined && value !== null && value !== '') {\r\n            params.append(key, value.toString());\r\n          }\r\n        });\r\n      }\r\n      \r\n      const response = await api.get(`/products/?${params.toString()}`);\r\n      const data = response.data;\r\n      // Ensure we always return an array\r\n      return Array.isArray(data) ? data : ((data as { results?: Product[] }).results || []);\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to fetch products';\r\n      throw new Error(errorMessage || 'Failed to fetch products');\r\n    }\r\n  },\r\n\r\n  async searchProducts(filters: SearchFilters): Promise<SearchResponse> {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null && value !== '') {\r\n          params.append(key, value.toString());\r\n        }\r\n      });\r\n      \r\n      const response = await api.get(`/products/search/?${params.toString()}`);\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to search products';\r\n      throw new Error(errorMessage || 'Failed to search products');\r\n    }\r\n  },\r\n\r\n  async getProduct(id: number): Promise<Product> {\r\n    try {\r\n      const response = await api.get(`/products/${id}/`);\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to fetch product';\r\n      throw new Error(errorMessage || 'Failed to fetch product');\r\n    }\r\n  },\r\n\r\n  async createProduct(data: CreateProductData): Promise<Product> {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('title', data.title);\r\n      formData.append('description', data.description);\r\n      formData.append('category', data.category);\r\n      formData.append('price', data.price.toString());\r\n      if (data.image) {\r\n        formData.append('image', data.image);\r\n      }\r\n      if (data.is_available !== undefined) {\r\n        formData.append('is_available', data.is_available.toString());\r\n      }\r\n\r\n      const response = await api.post('/products/', formData);\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to create product';\r\n      throw new Error(errorMessage || 'Failed to create product');\r\n    }\r\n  },\r\n\r\n  async updateProduct(id: number, data: UpdateProductData): Promise<Product> {\r\n    try {\r\n      const formData = new FormData();\r\n      if (data.title) formData.append('title', data.title);\r\n      if (data.description) formData.append('description', data.description);\r\n      if (data.category) formData.append('category', data.category);\r\n      if (data.price !== undefined) formData.append('price', data.price.toString());\r\n      if (data.image) formData.append('image', data.image);\r\n      if (data.is_available !== undefined) formData.append('is_available', data.is_available.toString());\r\n\r\n      const response = await api.patch(`/products/${id}/`, formData);\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to update product';\r\n      throw new Error(errorMessage || 'Failed to update product');\r\n    }\r\n  },\r\n\r\n  async deleteProduct(id: number): Promise<void> {\r\n    try {\r\n      await api.delete(`/products/${id}/`);\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to delete product';\r\n      throw new Error(errorMessage || 'Failed to delete product');\r\n    }\r\n  },\r\n\r\n  async toggleProductAvailability(id: number): Promise<{ message: string; is_available: boolean }> {\r\n    try {\r\n      const response = await api.post(`/products/${id}/toggle-availability/`);\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to toggle product availability';\r\n      throw new Error(errorMessage || 'Failed to toggle product availability');\r\n    }\r\n  },\r\n\r\n  async getUserProducts(): Promise<Product[]> {\r\n    try {\r\n      const response = await api.get('/products/my-products/');\r\n      const data = response.data;\r\n      // Ensure we always return an array\r\n      return Array.isArray(data) ? data : ((data as { results?: Product[] }).results || []);\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to fetch user products';\r\n      throw new Error(errorMessage || 'Failed to fetch user products');\r\n    }\r\n  },\r\n\r\n  async getCategories(): Promise<Category[]> {\r\n    try {\r\n      const response = await api.get('/products/categories/');\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      const errorMessage = error && typeof error === 'object' && 'response' in error \r\n        ? (error as any).response?.data?.detail || (error as any).message \r\n        : 'Failed to fetch categories';\r\n      throw new Error(errorMessage || 'Failed to fetch categories');\r\n    }\r\n  }\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///E:/ODOO/hackathon_2.0/frontend/ecofinds_frontend/src/app/products/%5Bid%5D/edit/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, use } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport ProtectedRoute from '@/components/ProtectedRoute';\r\nimport { productsService } from '@/lib/products';\r\nimport { Upload, X, Save, ArrowLeft, AlertCircle, CheckCircle } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { getImageUrl } from '@/lib/products';\r\n\r\nconst productSchema = z.object({\r\n  title: z.string().min(1, 'Title is required').max(200, 'Title must be less than 200 characters'),\r\n  description: z.string().min(10, 'Description must be at least 10 characters').max(1000, 'Description must be less than 1000 characters'),\r\n  category: z.string().min(1, 'Category is required'),\r\n  price: z.string().min(1, 'Price is required').refine((val) => !isNaN(Number(val)) && Number(val) > 0, 'Price must be a positive number'),\r\n});\r\n\r\ntype ProductFormData = z.infer<typeof productSchema>;\r\n\r\ninterface Category {\r\n  value: string;\r\n  label: string;\r\n}\r\n\r\ninterface Product {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  price: string;\r\n  image?: string;\r\n  is_available: boolean;\r\n  owner: number;\r\n}\r\n\r\ninterface EditProductPageProps {\r\n  params: Promise<{\r\n    id: string;\r\n  }>;\r\n}\r\n\r\nexport default function EditProductPage({ params }: EditProductPageProps) {\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [selectedImage, setSelectedImage] = useState<File | null>(null);\r\n  const [imagePreview, setImagePreview] = useState<string>('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const { user, isAuthenticated } = useAuth();\r\n  const router = useRouter();\r\n\r\n  // Unwrap the params Promise using React.use()\r\n  const resolvedParams = use(params);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    setValue,\r\n    reset\r\n  } = useForm<ProductFormData>({\r\n    resolver: zodResolver(productSchema)\r\n  });\r\n\r\n  // Fetch product data and categories\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch categories and product data\r\n        const [categoriesData, productData] = await Promise.all([\r\n          productsService.getCategories(),\r\n          productsService.getProduct(parseInt(resolvedParams.id))\r\n        ]);\r\n        \r\n        setCategories(categoriesData);\r\n        \r\n        // Check if user owns this product\r\n        if (productData.owner !== user?.id) {\r\n          setError('You do not have permission to edit this product');\r\n          return;\r\n        }\r\n\r\n        setProduct(productData);\r\n        \r\n        // Set form values\r\n        reset({\r\n          title: productData.title,\r\n          description: productData.description,\r\n          category: productData.category,\r\n          price: productData.price,\r\n        });\r\n\r\n        // Set image preview if exists\r\n        if (productData.image) {\r\n          setImagePreview(getImageUrl(productData.image));\r\n        }\r\n      } catch (err) {\r\n        setError('Failed to load product data');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (isAuthenticated && user) {\r\n      fetchData();\r\n    }\r\n  }, [resolvedParams.id, isAuthenticated, user, reset]);\r\n\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setSelectedImage(file);\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImagePreview(e.target?.result as string);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const removeImage = () => {\r\n    setSelectedImage(null);\r\n    setImagePreview('');\r\n  };\r\n\r\n  const onSubmit = async (data: ProductFormData) => {\r\n    setIsSaving(true);\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      const updateData = {\r\n        title: data.title,\r\n        description: data.description,\r\n        category: data.category,\r\n        price: parseFloat(data.price),\r\n        image: selectedImage || undefined,\r\n      };\r\n\r\n      await productsService.updateProduct(parseInt(resolvedParams.id), updateData);\r\n      setSuccess('Product updated successfully!');\r\n      setTimeout(() => {\r\n        router.push('/products/my-products');\r\n      }, 2000);\r\n    } catch (err: unknown) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to update product. Please try again.';\r\n      setError(errorMessage);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Authentication Required</h2>\r\n          <p className=\"text-gray-600 mb-6\">Please log in to edit products.</p>\r\n          <Link\r\n            href=\"/login\"\r\n            className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\"\r\n          >\r\n            Login\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading product...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !product) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Error</h2>\r\n          <p className=\"text-gray-600 mb-6\">{error}</p>\r\n          <Link\r\n            href=\"/products\"\r\n            className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\"\r\n          >\r\n            Back to Products\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"min-h-screen bg-gray-50 py-8\">\r\n        <div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          {/* Header */}\r\n          <div className=\"mb-8\">\r\n            <Link\r\n              href=\"/products/my-products\"\r\n              className=\"inline-flex items-center text-green-600 hover:text-green-700 mb-4\"\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n              Back to My Products\r\n            </Link>\r\n            <h1 className=\"text-3xl font-bold text-gray-900\">Edit Product</h1>\r\n            <p className=\"text-gray-600 mt-2\">Update your product information</p>\r\n          </div>\r\n\r\n          {/* Form */}\r\n          <div className=\"bg-white shadow rounded-lg p-6\">\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n              {/* Success/Error Messages */}\r\n              {success && (\r\n                <div className=\"bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-md flex items-center\">\r\n                  <CheckCircle className=\"h-5 w-5 mr-2\" />\r\n                  {success}\r\n                </div>\r\n              )}\r\n\r\n              {error && (\r\n                <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md flex items-center\">\r\n                  <AlertCircle className=\"h-5 w-5 mr-2\" />\r\n                  {error}\r\n                </div>\r\n              )}\r\n\r\n              {/* Product Title */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Product Title *\r\n                </label>\r\n                <input\r\n                  {...register('title')}\r\n                  type=\"text\"\r\n                  className={`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${\r\n                    errors.title ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Enter product title\"\r\n                />\r\n                {errors.title && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.title.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Category */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Category *\r\n                </label>\r\n                <select\r\n                  {...register('category')}\r\n                  className={`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${\r\n                    errors.category ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                >\r\n                  <option value=\"\">Select a category</option>\r\n                  {categories.map((category) => (\r\n                    <option key={category.value} value={category.value}>\r\n                      {category.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {errors.category && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.category.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Price */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Price ($) *\r\n                </label>\r\n                <input\r\n                  {...register('price')}\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  className={`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${\r\n                    errors.price ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"0.00\"\r\n                />\r\n                {errors.price && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.price.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Description *\r\n                </label>\r\n                <textarea\r\n                  {...register('description')}\r\n                  rows={4}\r\n                  className={`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${\r\n                    errors.description ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Describe your product in detail...\"\r\n                />\r\n                {errors.description && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.description.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Image Upload */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Product Image\r\n                </label>\r\n                \r\n                {!imagePreview ? (\r\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors\">\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleImageChange}\r\n                      className=\"hidden\"\r\n                      id=\"image-upload\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"image-upload\"\r\n                      className=\"cursor-pointer flex flex-col items-center\"\r\n                    >\r\n                      <Upload className=\"h-12 w-12 text-gray-400 mb-4\" />\r\n                      <span className=\"text-gray-600\">Click to upload a new image</span>\r\n                      <span className=\"text-sm text-gray-500 mt-1\">PNG, JPG up to 10MB</span>\r\n                    </label>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"relative\">\r\n                    <img\r\n                      src={imagePreview}\r\n                      alt=\"Preview\"\r\n                      className=\"w-full h-64 object-cover rounded-lg\"\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={removeImage}\r\n                      className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600\"\r\n                    >\r\n                      <X className=\"h-4 w-4\" />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Submit Button */}\r\n              <div className=\"flex justify-end space-x-4\">\r\n                <Link\r\n                  href=\"/products/my-products\"\r\n                  className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50\"\r\n                >\r\n                  Cancel\r\n                </Link>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={isSaving}\r\n                  className=\"flex items-center px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50\"\r\n                >\r\n                  <Save className=\"h-4 w-4 mr-2\" />\r\n                  {isSaving ? 'Saving...' : 'Save Changes'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}