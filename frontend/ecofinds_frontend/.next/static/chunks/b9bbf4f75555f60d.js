(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97033,e=>{"use strict";e.s(["ArrowLeft",()=>t],97033);let t=(0,e.i(23948).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},23948,e=>{"use strict";e.s(["default",()=>i],23948);var t=e.i(90207);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)((e,r)=>{let{color:l="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:o="",children:n,iconNode:u,...m}=e;return(0,t.createElement)("svg",{ref:r,...s,width:i,height:i,stroke:l,strokeWidth:c?24*Number(d)/Number(i):d,className:a("lucide",o),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(n)?n:[n]])}),i=(e,s)=>{let i=(0,t.forwardRef)((i,d)=>{let{className:c,...o}=i;return(0,t.createElement)(l,{ref:d,iconNode:s,className:a("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return i.displayName=r(e),i}},85953,(e,t,r)=>{t.exports=e.r(73162)},32281,e=>{"use strict";e.s(["getImageUrl",()=>r,"productsService",()=>a]);var t=e.i(79332);let r=e=>e?e.startsWith("http")?e:"http://localhost:8000".concat(e):"",a={async getProducts(e){try{let r=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&""!==a&&r.append(t,a.toString())});let a=(await t.default.get("/products/?".concat(r.toString()))).data;return Array.isArray(a)?a:a.results||[]}catch(e){var r,a;throw Error((e&&"object"==typeof e&&"response"in e?(null==(a=e.response)||null==(r=a.data)?void 0:r.detail)||e.message:"Failed to fetch products")||"Failed to fetch products")}},async searchProducts(e){try{let r=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&""!==a&&r.append(t,a.toString())}),(await t.default.get("/products/search/?".concat(r.toString()))).data}catch(e){var r,a;throw Error((e&&"object"==typeof e&&"response"in e?(null==(a=e.response)||null==(r=a.data)?void 0:r.detail)||e.message:"Failed to search products")||"Failed to search products")}},async getProduct(e){try{return(await t.default.get("/products/".concat(e,"/"))).data}catch(e){var r,a;throw Error((e&&"object"==typeof e&&"response"in e?(null==(a=e.response)||null==(r=a.data)?void 0:r.detail)||e.message:"Failed to fetch product")||"Failed to fetch product")}},async createProduct(e){try{let r=new FormData;return r.append("title",e.title),r.append("description",e.description),r.append("category",e.category),r.append("price",e.price.toString()),e.image&&r.append("image",e.image),void 0!==e.is_available&&r.append("is_available",e.is_available.toString()),(await t.default.post("/products/",r)).data}catch(e){var r,a;throw Error((e&&"object"==typeof e&&"response"in e?(null==(a=e.response)||null==(r=a.data)?void 0:r.detail)||e.message:"Failed to create product")||"Failed to create product")}},async updateProduct(e,r){try{let a=new FormData;return r.title&&a.append("title",r.title),r.description&&a.append("description",r.description),r.category&&a.append("category",r.category),void 0!==r.price&&a.append("price",r.price.toString()),r.image&&a.append("image",r.image),void 0!==r.is_available&&a.append("is_available",r.is_available.toString()),(await t.default.patch("/products/".concat(e,"/"),a)).data}catch(e){var a,s;throw Error((e&&"object"==typeof e&&"response"in e?(null==(s=e.response)||null==(a=s.data)?void 0:a.detail)||e.message:"Failed to update product")||"Failed to update product")}},async deleteProduct(e){try{await t.default.delete("/products/".concat(e,"/"))}catch(e){var r,a;throw Error((e&&"object"==typeof e&&"response"in e?(null==(a=e.response)||null==(r=a.data)?void 0:r.detail)||e.message:"Failed to delete product")||"Failed to delete product")}},async toggleProductAvailability(e){try{return(await t.default.post("/products/".concat(e,"/toggle-availability/"))).data}catch(e){var r,a;throw Error((e&&"object"==typeof e&&"response"in e?(null==(a=e.response)||null==(r=a.data)?void 0:r.detail)||e.message:"Failed to toggle product availability")||"Failed to toggle product availability")}},async getUserProducts(){try{let e=(await t.default.get("/products/my-products/")).data;return Array.isArray(e)?e:e.results||[]}catch(t){var e,r;throw Error((t&&"object"==typeof t&&"response"in t?(null==(r=t.response)||null==(e=r.data)?void 0:e.detail)||t.message:"Failed to fetch user products")||"Failed to fetch user products")}},async getCategories(){try{return(await t.default.get("/products/categories/")).data}catch(t){var e,r;throw Error((t&&"object"==typeof t&&"response"in t?(null==(r=t.response)||null==(e=r.data)?void 0:e.detail)||t.message:"Failed to fetch categories")||"Failed to fetch categories")}}}},21309,e=>{"use strict";e.s(["Eye",()=>t],21309);let t=(0,e.i(23948).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},39147,e=>{"use strict";e.s(["DollarSign",()=>t],39147);let t=(0,e.i(23948).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},73274,e=>{"use strict";e.s(["Calendar",()=>t],73274);let t=(0,e.i(23948).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},12939,e=>{"use strict";e.s(["Plus",()=>t],12939);let t=(0,e.i(23948).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88123,e=>{"use strict";e.s(["Trash2",()=>t],88123);let t=(0,e.i(23948).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},44389,e=>{"use strict";e.s(["Edit",()=>t],44389);let t=(0,e.i(23948).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},98184,e=>{"use strict";e.s(["default",()=>p],98184);var t=e.i(10078),r=e.i(90207),a=e.i(85953),s=e.i(63143),l=e.i(32281),i=e.i(97033),d=e.i(12939),c=e.i(44389),o=e.i(88123),n=e.i(21309);let u=(0,e.i(23948).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var m=e.i(39147),h=e.i(73274);function p(){let[e,p]=(0,r.useState)([]),[x,g]=(0,r.useState)(!0),[y,f]=(0,r.useState)(""),[v,b]=(0,r.useState)(null),{user:j,isAuthenticated:w}=(0,s.useAuth)(),N=(0,a.useRouter)();(0,r.useEffect)(()=>{if(!w)return void N.push("/login");(async()=>{try{let e=await l.productsService.getUserProducts();p(e)}catch(e){f(e instanceof Error?e.message:"Failed to load your products"),console.error("Error fetching user products:",e)}finally{g(!1)}})()},[w,N]);let k=async t=>{if(confirm("Are you sure you want to delete this product?")){b(t);try{await l.productsService.deleteProduct(t),p(e.filter(e=>e.id!==t))}catch(e){f(e instanceof Error?e.message:"Failed to delete product"),console.error("Error deleting product:",e)}finally{b(null)}}};if(!w)return null;if(x)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your products..."})]})});let E=e.length,F=e.filter(e=>e.is_available).length,A=e.reduce((e,t)=>e+parseFloat(t.price),0);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("button",{onClick:()=>N.back(),className:"flex items-center text-gray-600 hover:text-gray-900 mr-4",children:[(0,t.jsx)(i.ArrowLeft,{className:"h-5 w-5 mr-1"}),"Back"]}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Dashboard"})]}),(0,t.jsxs)("button",{onClick:()=>N.push("/products/create"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,t.jsx)(d.Plus,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(null==j?void 0:j.first_name)||(null==j?void 0:j.username),"!"]}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your products and track your marketplace activity"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(u,{className:"h-6 w-6 text-green-600"})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Products"}),(0,t.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:E})]})})]})})}),(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(n.Eye,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Available"}),(0,t.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:F})]})})]})})}),(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(m.DollarSign,{className:"h-6 w-6 text-yellow-600"})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Value"}),(0,t.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:["$",A.toFixed(2)]})]})})]})})})]}),y&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md mb-6",children:y}),(0,t.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Your Products"}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Start by adding your first product to the marketplace"}),(0,t.jsxs)("button",{onClick:()=>N.push("/products/create"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(d.Plus,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200",children:e.image?(0,t.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"}):(0,t.jsx)("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:(0,t.jsx)(u,{className:"h-12 w-12 text-gray-400"})})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:e.category}),(0,t.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",e.price]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(h.Calendar,{className:"h-3 w-3 mr-1"}),new Date(e.created_at).toLocaleDateString()]}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_available?"Available":"Sold"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.id,void N.push("/products/".concat(t))},className:"flex-1 flex items-center justify-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,t.jsx)(n.Eye,{className:"h-4 w-4 mr-1"}),"View"]}),(0,t.jsxs)("button",{onClick:()=>(e.id,void alert("Edit functionality coming soon!")),className:"flex-1 flex items-center justify-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,t.jsx)(c.Edit,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,t.jsxs)("button",{onClick:()=>k(e.id),disabled:v===e.id,className:"flex-1 flex items-center justify-center px-3 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 disabled:opacity-50",children:[(0,t.jsx)(o.Trash2,{className:"h-4 w-4 mr-1"}),v===e.id?"Deleting...":"Delete"]})]})]})]},e.id))})]})})]})})]})}}]);