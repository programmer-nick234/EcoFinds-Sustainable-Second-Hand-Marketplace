(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63143,e=>{"use strict";e.s(["AuthProvider",()=>l,"useAuth",()=>i]);var r=e.i(10078),t=e.i(90207),a=e.i(91288);let o=(0,t.createContext)(void 0),i=()=>{let e=(0,t.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:i}=e,[l,u]=(0,t.useState)(null),[s,n]=(0,t.useState)(!0),[c,h]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{if(a.authService.getToken())try{let e=await a.authService.getProfile();u(e)}catch(r){var e;console.error("Failed to get user profile:",r),(null==(e=r.response)?void 0:e.status)===401&&a.authService.logout()}n(!1)})()},[]);let d=async(e,r)=>{try{h(null);let t=await a.authService.login({username:e,password:r});u(t.user)}catch(e){throw h(e instanceof Error?e.message:"Login failed"),e}},g=async e=>{try{h(null);let r=await a.authService.register(e);u(r.user)}catch(e){throw h(e instanceof Error?e.message:"Registration failed"),e}},v=async()=>{try{await a.authService.logout(),u(null),h(null)}catch(e){console.error("Logout error:",e),u(null),h(null)}},f=async e=>{try{h(null);let r=await a.authService.updateProfile(e);u(r)}catch(e){throw h(e instanceof Error?e.message:"Profile update failed"),e}},w=async e=>{try{h(null),await a.authService.changePassword(e)}catch(e){throw h(e instanceof Error?e.message:"Password change failed"),e}};return(0,r.jsx)(o.Provider,{value:{user:l,loading:s,login:d,register:g,logout:v,updateProfile:f,changePassword:w,isAuthenticated:!!l,error:c,clearError:()=>{h(null)}},children:i})}}]);